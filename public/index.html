<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Top 100 zkLink Rich Address List - Updated Every Hour</title>
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GSQPQG7YKX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-GSQPQG7YKX');
  </script>
  <style>
    /* ベースリセット＆フォント */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html { scroll-behavior: smooth; }
    /* 通常テキストをやや明るいグレーに、見出しは白に */
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #121212;
      color: #CCCCCC;
      line-height: 1.6;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
    }
    h1, h2, h3, h4, h5, h6 { color: #FFFFFF; }
    a {
      /* リンク色はそのまま */
      color: #BB86FC;
      text-decoration: none;
      transition: color 0.2s ease-in-out;
    }
    a:hover { color: #D0AFFF; }
    
    /* コンテナ */
    .container {
      width: 100%;
      max-width: 1100px;
      background-color: #1E1E1E;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      padding: 30px;
      overflow: hidden;
    }
    
    /* タイトル */
    h1 {
      font-size: 2rem;
      margin-bottom: 15px;
      text-align: center;
      border-bottom: 1px solid #333;
      padding-bottom: 10px;
    }
    
    /* 小リンク部分：各リンクを改行表示 */
    p.small-links {
      text-align: center;
      margin-bottom: 20px;
      line-height: 1.8;
    }
    p.small-links a {
      font-size: 0.9rem;
      display: block;
      margin: 4px 0;
    }
    
    /* テーブル（PC表示用） */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      background-color: #272727;
      border-radius: 4px;
      overflow: hidden;
    }
    thead th {
      padding: 12px 15px;
      background-color: #333;
      font-weight: 500;
      font-size: 1rem;
      text-align: left;
    }
    /* 「zkLink Nova Mainnet Address」は左寄せ */
    thead th:nth-child(2) { text-align: left; }
    
    tbody td {
      padding: 12px 15px;
      font-size: 0.9rem;
      border-bottom: 1px solid #333;
      word-break: break-word;
      text-align: left;
      line-height: 1.5;
    }
    /* Rank列中央寄せ */
    thead th:first-child,
    tbody td:first-child { text-align: center; }
    
    tbody tr:hover { background-color: #2a2a2a; }
    .nowrap { white-space: nowrap; }
    
    /* モバイル用：カード表示に変換 */
    @media (max-width: 768px) {
      table { border: none; }
      thead { display: none; }
      tbody, tr, td { display: block; width: 100%; }
      tr {
        background-color: #272727;
        margin-bottom: 15px;
        padding: 15px;
        border-radius: 4px;
      }
      td {
        text-align: left;
        padding: 8px 0;
        border: none;
        position: relative;
      }
      td::before {
        content: attr(data-label);
        font-weight: 500;
        display: inline-block;
        width: 90px;
        /* モバイルでは項目名はリンク色ではなく通常テキストよりやや明るめ */
        color: #BBBBBB;
      }
      td:not(:last-child) { margin-bottom: 8px; }
      td[data-label="Rank"]::before {
        width: 50px;
      }
      td[data-label="Address"] {
        text-align: left !important;
      }
      td[data-label="Address"] a,
      td[data-label="Address"] strong {
        display: inline-flex;
        text-align: left;
        width: 100%;
      }
    }
    
    /* フッター */
    .footer {
      margin-top: 30px;
      font-size: 0.85rem;
      color: #888888;
      text-align: center;
      line-height: 1.4;
    }
    .footer a { display: inline-block; margin: 5px 5px; }
    .info-text { margin-bottom: 10px; }

    /* Adjusting the spacing for 'Created by' section */
    .footer p:last-child {
      margin-top: 10px;
    }

    /* モバイル向け調整 */
    @media (max-width: 768px) {
      .footer {
        font-size: 0.75rem;
        margin-top: 20px;
      }

      .footer p {
        margin-bottom: 5px;
      }

      .footer p:last-child {
        margin-top: 5px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Top 100 zkLink Rich Address List - Updated Every Hour</h1>
    <p class="small-links">
      <a href="whitepaper.html" target="_blank">zkLink ホワイトペーパー(日本語訳)</a>
      <a href="lynks/ranking.html" target="_blank">Top 100 Nova Lynks Holders</a>
      <a href="https://web.archive.org/web/20250000000000*/https://zkltop100.net" target="_blank">Holding Trends (Wayback Machine)</a>
    </p>
    <table id="balances-table">
      <thead>
        <tr>
          <th>Rank</th>
          <th>zkLink Nova Mainnet Address</th>
          <th class="nowrap">Quantity</th>
          <th class="nowrap">Percentage</th>
          <th class="nowrap">Value</th>
        </tr>
      </thead>
      <tbody>
        <!-- サンプル行 -->
        <tr>
          <td data-label="Rank">1</td>
          <td data-label="Address"><a href="https://explorer.zklink.io/address/0x123..." target="_blank">0x123...abc</a></td>
          <td class="nowrap" data-label="Quantity">10,000 ZKL</td>
          <td class="nowrap" data-label="Percentage">1.0000%</td>
          <td class="nowrap" data-label="Value">$10,000.00</td>
        </tr>
        <!-- JSから動的にデータを挿入 -->
      </tbody>
    </table>
    <div class="footer">
      <p class="info-text">
        <strong>Reference</strong><br>
        <a href="https://zk.link/governance" target="_blank">zkLink Treasury | zk.link</a><br>
        <a href="https://explorer-api.zklink.io/docs#/" target="_blank">zkLink Nova Block Explorer API | zklink.io</a><br>
        <a href="https://etherscan.io/token/0xfc385a1df85660a7e041423db512f779070fcede#balances" target="_blank">ZKLink (ZKL) Token Tracker | Etherscan</a><br>
        <a href="https://www.coingecko.com/en/coins/zklink" target="_blank">zkLink Price | CoinGecko (API)</a>
      </p>
      <p class="info-text">
        <strong>Disclaimer</strong><br>
        The rankings and token quantities shown on this site are fetched from external APIs and are provided for informational purposes only. Please verify any data before making decisions.
      </p>
      <p>Created by <a href="https://x.com/modeler_zkl" target="_blank">X@modeler_zkl</a></p>
    </div>
  </div>
  
  <script>
    async function fetchCurrentPrice() {
      try {
        const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=zklink&vs_currencies=usd');
        const data = await response.json();
        return data.zklink.usd;
      } catch (error) {
        console.error("Error fetching current price:", error);
        return 0;
      }
    }

    async function updateTitleWithPrice() {
      const currentPrice = await fetchCurrentPrice();
      const title = `ZKL $${currentPrice.toFixed(3)} | Top 100 zkLink Rich Address List - Updated Every Hour`;
      document.title = title;
    }
    updateTitleWithPrice();

    async function fetchBalances() {
      const currentPrice = await fetchCurrentPrice();
      try {
        const response = await fetch('/get-balances');
        const balances = await response.json();
        const tableBody = document.querySelector('#balances-table tbody');
        tableBody.innerHTML = '';
        balances.forEach(item => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td data-label="Rank">${item.Ranking}</td>
            <td data-label="Address">${ item.label ? `<strong>${item.label}</strong><br><a href="https://explorer.zklink.io/address/${item.address}" target="_blank">${item.address}</a>` : `<a href="https://explorer.zklink.io/address/${item.address}" target="_blank">${item.address}</a>` }</td>
            <td class="nowrap" data-label="Quantity">${item.balance}</td>
            <td class="nowrap" data-label="Percentage">${(Number(item.balance.replace(' ZKL','').replace(/,/g, '')) / 1000000000 * 100).toFixed(4)}%</td>
            <td class="nowrap" data-label="Value">$${(Number(item.balance.replace(' ZKL','').replace(/,/g, '')) * currentPrice).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</td>
          `;
          tableBody.appendChild(row);
        });
      } catch (error) {
        console.error("Error fetching balances:", error);
      }
    }
    fetchBalances();
  </script>
</body>
</html>

